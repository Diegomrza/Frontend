<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Creación de nuevos administradores</title>
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/jquery.bxSlider.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <section class="header-top">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4">
                        <div class="a-right">
                            <a href="loginvista.html">
                                <p><span><i class="fa fa-user"></i></span>Cerrar Sesión</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="header-catagory">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-md-offset-3">

                        <div class="row">
                            <div class="col-md-12">
                                <form method="post" action="#">
                                    <input type="text" placeholder="Buscar">
                                    <select>
                                        <option>Acción</option>
                                        <option>Terror</option>
                                        <option>Aventura</option>
                                        <option>Puzzle</option>
                                        <option>Misterio</option>
                                    </select>
                                    <button><i class="fa fa-search"></i></button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <img id="Logo" src="Logo Tienda.jpg" alt="">
            </div>
        

            <h1 style="text-align: center;">Datos de Usuario</h1>

        <br>
        <br>
    </header>

    <form class="formularioN">
        <div>
            <div>
                <input id="nombre" type="text" placeholder="Nombre">
            </div>

            <div>
                <input id="apellido" type="text" placeholder="Apellido">
            </div>

            <div>
                <input id="usuario" type="text" placeholder="Usuario">
            </div>

            <div>
                <input id="password" type="text" placeholder="Contraseña">
            </div>

            <div>
                <input id="confirmPassword" type="text" placeholder="Confirmar Contraseña">
            </div>

            <br>
            <div>
                <button type="button" onclick="crear()">Crear Usuario</button>
                <button type="button" onclick="cancelar()">Cancelar</button>
            </div>
        </div>
    </form>

    <!-- -->

    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.bxSlider.js"></script>
    <script></script>
    <script src="js/active.js"></script>

    <script>

        function crear() {

            var nombre = document.querySelector('#nombre').value
            var apellido =  document.querySelector('#apellido').value
            var usuario = document.querySelector('#usuario').value
            var password =  document.querySelector('#password').value
            var confirmPassword = document.querySelector('#confirmPassword').value
            var tipoU = sessionStorage.getItem('tipo')

            objeto = {
                "nombre": nombre,
                "apellido": apellido,
                "usuario": usuario,
                "password": password,
                "confirmPassword": confirmPassword,
                "tipo": "administrador"
            }

            fetch(`http://localhost:5000/registroAdmin/`, {
                method: 'POST',
                body: JSON.stringify(objeto),
                headers:{
                    'Content-Type': 'application/json'
                }
            }).then(res => res.json())
                .catch(err => {
                    console.log(err)

                })
                .then(response => {
                    console.log(response)
                    alert("usuario creado")
                    location.href="Principal1.html"
                })

        }

        function cancelar() {
            var tipoU = sessionStorage.getItem('tipo')
            if (tipoU == "administrador"){
                location.href="Principal1.html"
            } else{
                location.href="Principal2.html"
            }
        }

    </script>

</body>

</html>